/**
 * Locale metadata for language variant display.
 * Maps locale codes to human-readable names and ISO 3166-1 alpha-2 country codes
 * used for flag emoji rendering.
 */

export interface LocaleDisplay {
  name: string;
  flag: string; // ISO 3166-1 alpha-2 country code
}

export const LOCALE_MAP: Record<string, LocaleDisplay> = {
  // Major languages
  'en-US': { name: 'English (US)', flag: 'US' },
  'en-GB': { name: 'English (UK)', flag: 'GB' },
  'en-CA': { name: 'English (Canada)', flag: 'CA' },
  'de': { name: 'Deutsch', flag: 'DE' },
  'fr': { name: 'Francais', flag: 'FR' },
  'es-ES': { name: 'Espanol (Spain)', flag: 'ES' },
  'es-AR': { name: 'Espanol (Argentina)', flag: 'AR' },
  'es-CL': { name: 'Espanol (Chile)', flag: 'CL' },
  'es-MX': { name: 'Espanol (Mexico)', flag: 'MX' },
  'pt-BR': { name: 'Portugues (Brazil)', flag: 'BR' },
  'pt-PT': { name: 'Portugues (Portugal)', flag: 'PT' },
  'it': { name: 'Italiano', flag: 'IT' },
  'nl': { name: 'Nederlands', flag: 'NL' },
  'pl': { name: 'Polski', flag: 'PL' },
  'ru': { name: 'Russian', flag: 'RU' },
  'ja': { name: 'Japanese', flag: 'JP' },
  'ko': { name: 'Korean', flag: 'KR' },
  'zh-CN': { name: 'Chinese (Simplified)', flag: 'CN' },
  'zh-TW': { name: 'Chinese (Traditional)', flag: 'TW' },
  'sv-SE': { name: 'Svenska', flag: 'SE' },
  'nb-NO': { name: 'Norsk Bokmal', flag: 'NO' },
  'nn-NO': { name: 'Norsk Nynorsk', flag: 'NO' },
  'da': { name: 'Dansk', flag: 'DK' },
  'fi': { name: 'Suomi', flag: 'FI' },
  'cs': { name: 'Cestina', flag: 'CZ' },
  'hu': { name: 'Magyar', flag: 'HU' },
  'tr': { name: 'Turkce', flag: 'TR' },
  'el': { name: 'Greek', flag: 'GR' },
  'ar': { name: 'Arabic', flag: 'SA' },
  'he': { name: 'Hebrew', flag: 'IL' },
  'hi-IN': { name: 'Hindi', flag: 'IN' },
  'th': { name: 'Thai', flag: 'TH' },
  'vi': { name: 'Vietnamese', flag: 'VN' },
  'id': { name: 'Bahasa Indonesia', flag: 'ID' },
  'ms': { name: 'Bahasa Melayu', flag: 'MY' },
  'uk': { name: 'Ukrainian', flag: 'UA' },
  'ro': { name: 'Romana', flag: 'RO' },
  'bg': { name: 'Bulgarian', flag: 'BG' },
  'hr': { name: 'Hrvatski', flag: 'HR' },
  'sk': { name: 'Slovak', flag: 'SK' },
  'sl': { name: 'Slovenian', flag: 'SI' },
  'sr': { name: 'Serbian', flag: 'RS' },
  'lt': { name: 'Lithuanian', flag: 'LT' },
  'lv': { name: 'Latvian', flag: 'LV' },
  'et': { name: 'Estonian', flag: 'EE' },
  'sq': { name: 'Albanian', flag: 'AL' },
  'mk': { name: 'Macedonian', flag: 'MK' },
  'bs': { name: 'Bosnian', flag: 'BA' },
  'ca': { name: 'Catalan', flag: 'ES' },
  'eu': { name: 'Basque', flag: 'ES' },
  'gl': { name: 'Galician', flag: 'ES' },
  'ga-IE': { name: 'Irish', flag: 'IE' },
  'cy': { name: 'Welsh', flag: 'GB' },
  'gd': { name: 'Scottish Gaelic', flag: 'GB' },
  'is': { name: 'Icelandic', flag: 'IS' },
  'mt': { name: 'Maltese', flag: 'MT' },
  'lb': { name: 'Luxembourgish', flag: 'LU' },
  'fy-NL': { name: 'West Frisian', flag: 'NL' },
  'af': { name: 'Afrikaans', flag: 'ZA' },
  'sw': { name: 'Swahili', flag: 'KE' },
  'am': { name: 'Amharic', flag: 'ET' },
  'km': { name: 'Khmer', flag: 'KH' },
  'lo': { name: 'Lao', flag: 'LA' },
  'my': { name: 'Burmese', flag: 'MM' },
  'ka': { name: 'Georgian', flag: 'GE' },
  'hy-AM': { name: 'Armenian', flag: 'AM' },
  'az': { name: 'Azerbaijani', flag: 'AZ' },
  'kk': { name: 'Kazakh', flag: 'KZ' },
  'uz': { name: 'Uzbek', flag: 'UZ' },
  'tg': { name: 'Tajik', flag: 'TJ' },
  'mn': { name: 'Mongolian', flag: 'MN' },
  'ne-NP': { name: 'Nepali', flag: 'NP' },
  'si': { name: 'Sinhala', flag: 'LK' },
  'ta': { name: 'Tamil', flag: 'IN' },
  'te': { name: 'Telugu', flag: 'IN' },
  'kn': { name: 'Kannada', flag: 'IN' },
  'ml': { name: 'Malayalam', flag: 'IN' },
  'mr': { name: 'Marathi', flag: 'IN' },
  'gu-IN': { name: 'Gujarati', flag: 'IN' },
  'pa-IN': { name: 'Punjabi', flag: 'IN' },
  'bn': { name: 'Bengali', flag: 'BD' },
  'or': { name: 'Odia', flag: 'IN' },
  'as': { name: 'Assamese', flag: 'IN' },
  'ur': { name: 'Urdu', flag: 'PK' },
  'fa': { name: 'Persian', flag: 'IR' },
  'ps': { name: 'Pashto', flag: 'AF' },
  'ku': { name: 'Kurdish', flag: 'IQ' },
  'be': { name: 'Belarusian', flag: 'BY' },
  'eo': { name: 'Esperanto', flag: 'EU' },
  'la': { name: 'Latin', flag: 'VA' },
  'br': { name: 'Breton', flag: 'FR' },
  'oc': { name: 'Occitan', flag: 'FR' },
  'ast': { name: 'Asturian', flag: 'ES' },
  'an': { name: 'Aragonese', flag: 'ES' },
  'co': { name: 'Corsican', flag: 'FR' },
  'sc': { name: 'Sardinian', flag: 'IT' },
  'fur': { name: 'Friulian', flag: 'IT' },
  'lij': { name: 'Ligurian', flag: 'IT' },
  'rm': { name: 'Romansh', flag: 'CH' },
  'hsb': { name: 'Upper Sorbian', flag: 'DE' },
  'dsb': { name: 'Lower Sorbian', flag: 'DE' },
  'fo': { name: 'Faroese', flag: 'FO' },
  'se': { name: 'Northern Sami', flag: 'NO' },
  'kab': { name: 'Kabyle', flag: 'DZ' },
  'cak': { name: 'Kaqchikel', flag: 'GT' },
  'trs': { name: 'Triqui', flag: 'MX' },
  'son': { name: 'Songhai', flag: 'ML' },
  'sco': { name: 'Scots', flag: 'GB' },
  'szl': { name: 'Silesian', flag: 'PL' },
  'ia': { name: 'Interlingua', flag: 'EU' },
  'wo': { name: 'Wolof', flag: 'SN' },
  'ff': { name: 'Fulah', flag: 'GN' },
  'yo': { name: 'Yoruba', flag: 'NG' },
  'ig': { name: 'Igbo', flag: 'NG' },
  'ha': { name: 'Hausa', flag: 'NG' },
  'zu': { name: 'Zulu', flag: 'ZA' },
  'xh': { name: 'Xhosa', flag: 'ZA' },
  'sn': { name: 'Shona', flag: 'ZW' },
  'so': { name: 'Somali', flag: 'SO' },
  'ti': { name: 'Tigrinya', flag: 'ER' },
  'rw': { name: 'Kinyarwanda', flag: 'RW' },
  'mg': { name: 'Malagasy', flag: 'MG' },
  'tl': { name: 'Tagalog', flag: 'PH' },
  'no': { name: 'Norwegian', flag: 'NO' },
  'bo': { name: 'Tibetan', flag: 'CN' },
  'ug': { name: 'Uyghur', flag: 'CN' },
  'sd': { name: 'Sindhi', flag: 'PK' },
  'tk': { name: 'Turkmen', flag: 'TM' },
  'ky': { name: 'Kyrgyz', flag: 'KG' },
  'tt': { name: 'Tatar', flag: 'RU' },
  'ab': { name: 'Abkhazian', flag: 'GE' },
  'aa': { name: 'Afar', flag: 'DJ' },
  'ak': { name: 'Akan', flag: 'GH' },
  'av': { name: 'Avaric', flag: 'RU' },
  'ay': { name: 'Aymara', flag: 'BO' },
  'ba': { name: 'Bashkir', flag: 'RU' },
  'bm': { name: 'Bambara', flag: 'ML' },
  'ce': { name: 'Chechen', flag: 'RU' },
  'ch': { name: 'Chamorro', flag: 'GU' },
  'cr': { name: 'Cree', flag: 'CA' },
  'cu': { name: 'Church Slavonic', flag: 'BG' },
  'cv': { name: 'Chuvash', flag: 'RU' },
  'dv': { name: 'Divehi', flag: 'MV' },
  'dz': { name: 'Dzongkha', flag: 'BT' },
  'ee': { name: 'Ewe', flag: 'GH' },
  'fj': { name: 'Fijian', flag: 'FJ' },
  'gn': { name: 'Guarani', flag: 'PY' },
  'ho': { name: 'Hiri Motu', flag: 'PG' },
  'ht': { name: 'Haitian Creole', flag: 'HT' },
  'ii': { name: 'Nuosu', flag: 'CN' },
  'ik': { name: 'Inupiaq', flag: 'US' },
  'io': { name: 'Ido', flag: 'EU' },
  'jv': { name: 'Javanese', flag: 'ID' },
  'kg': { name: 'Kongo', flag: 'CD' },
  'ki': { name: 'Kikuyu', flag: 'KE' },
  'kl': { name: 'Kalaallisut', flag: 'GL' },
  'ks': { name: 'Kashmiri', flag: 'IN' },
  'kv': { name: 'Komi', flag: 'RU' },
  'kw': { name: 'Cornish', flag: 'GB' },
  'lg': { name: 'Ganda', flag: 'UG' },
  'li': { name: 'Limburgish', flag: 'NL' },
  'ln': { name: 'Lingala', flag: 'CD' },
  'lu': { name: 'Luba-Katanga', flag: 'CD' },
  'mh': { name: 'Marshallese', flag: 'MH' },
  'mi': { name: 'Maori', flag: 'NZ' },
  'na': { name: 'Nauru', flag: 'NR' },
  'nd': { name: 'Northern Ndebele', flag: 'ZW' },
  'ng': { name: 'Ndonga', flag: 'NA' },
  'nr': { name: 'Southern Ndebele', flag: 'ZA' },
  'nv': { name: 'Navajo', flag: 'US' },
  'ny': { name: 'Chichewa', flag: 'MW' },
  'oj': { name: 'Ojibwe', flag: 'CA' },
  'om': { name: 'Oromo', flag: 'ET' },
  'os': { name: 'Ossetic', flag: 'GE' },
  'pi': { name: 'Pali', flag: 'IN' },
  'qu': { name: 'Quechua', flag: 'PE' },
  'rn': { name: 'Kirundi', flag: 'BI' },
  'sa': { name: 'Sanskrit', flag: 'IN' },
  'sg': { name: 'Sango', flag: 'CF' },
  'sm': { name: 'Samoan', flag: 'WS' },
  'ss': { name: 'Swati', flag: 'SZ' },
  'st': { name: 'Southern Sotho', flag: 'LS' },
  'su': { name: 'Sundanese', flag: 'ID' },
  'tn': { name: 'Tswana', flag: 'BW' },
  'to': { name: 'Tongan', flag: 'TO' },
  'ts': { name: 'Tsonga', flag: 'ZA' },
  'tw': { name: 'Twi', flag: 'GH' },
  'ty': { name: 'Tahitian', flag: 'PF' },
  've': { name: 'Venda', flag: 'ZA' },
  'vo': { name: 'Volapuk', flag: 'EU' },
  'wa': { name: 'Walloon', flag: 'BE' },
  'za': { name: 'Zhuang', flag: 'CN' },
  'yi': { name: 'Yiddish', flag: 'IL' },
};

/**
 * Get display info for a locale code.
 * Falls back to using the code itself as the name and inferring a country code.
 */
export function getLocaleDisplay(code: string): LocaleDisplay {
  if (LOCALE_MAP[code]) {
    return LOCALE_MAP[code];
  }
  // Try to infer a country code from compound locales like "xx-YY"
  const parts = code.split('-');
  const inferredFlag = parts.length > 1 ? parts[parts.length - 1].toUpperCase() : '';
  return { name: code, flag: inferredFlag };
}

/**
 * Convert an ISO 3166-1 alpha-2 country code to a flag emoji.
 * Works by mapping each letter to its regional indicator symbol.
 */
export function countryCodeToFlag(code: string): string {
  if (!code || code.length !== 2) return '';
  return code
    .toUpperCase()
    .split('')
    .map((c) => String.fromCodePoint(0x1f1e6 + c.charCodeAt(0) - 65))
    .join('');
}
